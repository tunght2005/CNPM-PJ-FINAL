{% load static %}
<!DOCTYPE html>
<html lang="vn">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css"
    />
    <link rel="stylesheet" href="{% static 'home/assets/css/notifi.css' %}" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
    />
     <!-- Favicon -->
     <link
     rel="apple-touch-icon"
     sizes="180x180"
     href="{% static 'home/favicon_io/apple-touch-icon.png' %}"
   />
   <link
     rel="icon"
     type="image/png"
     sizes="32x32"
     href="{% static 'home/favicon_io/favicon-32x32.png' %}"
   />
   <link
     rel="icon"
     type="image/png"
     sizes="16x16"
     href="{% static 'home/favicon_io/favicon-16x16.png' %}"
   />
   <link rel="manifest" href="{% static 'home/favicon_io/site.webmanifest' %}" />
   <!-- End -->
   <title>Thông báo của tôi</title>
  </head>
  <body>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Khởi tạo giỏ hàng và giao diện
        updateCartCount();
      });
      // Cập nhật số lượng giỏ hàng
      function updateCartCount() {
        const cart = JSON.parse(localStorage.getItem("cart")) || [];
        const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
        document.querySelector(".number-cart").textContent = totalItems;
      }
  </script> 
   <!-- Các thẻ meta và link khác -->
   <style>
    .table-notifi table th:last-child,
    .table-notifi table td:last-child {
        width: 150px;
        min-width: 150px;
    }

    .button {
        padding: 5px 10px;
        font-size: 12px;
        margin: 2px;
    }

    .table-notifi table td:last-child {
        text-align: center;
        white-space: nowrap;
    }
</style>
    <!-- Header -->
    <header class="header">
      <div class="container">
        <div class="right-info">
          <a href="#"><i class="fa-solid fa-users"></i>Quan Hệ Cổ Đông</a>
          <a href="{% url 'diamond_page' %}"><i class="fa-solid fa-map-location-dot"></i>Cửa Hàng</a>
          <a href="#"><i class="fa-solid fa-headset"></i>Hotline: 18000xxxx</a>
        </div>
        <a href="{% url 'home_page1' %}"
          ><img src="{%static 'home/assets/img/img-main/logo-page.jpg' %}" alt="" class="logo-header"
        /></a>
        <div class="left-info-shop">
          {% if request.session.user_id %}
        <a href="{% url 'customer_page' %}" class="user-card">
            <i class="fa-solid fa-user"></i> {{ request.session.user_name }}
        </a>
      {% else %}
        <a href="{% url 'login' %}" class="user-card">
              <i class="fa-solid fa-user"></i> Đăng nhập
        </a>
      {% endif %}
          <a href="{% url 'cart_page' %}" class="cart-shop">
            <img
              style="width: 20px; height: auto"
              src="https://cdn.pnj.io/images/image-update/layout/icon-cart-new.svg"
              alt=""
            />
            <span>Giỏ Hàng</span><span class="number-cart">0</span></a
          >
        </div>
      </div>
      <hr />
      <nav class="nav-menu">
        <ul>
          <li>
            <a href="{% url 'jewelry_page' %}" class="menu-item" id="item-1">Trang Sức</a>
            <!-- Sub Menu -->
            <div class="sub-menu-1">
              <div class="type-menu">
                <span>Chủng Loại</span>
                <a href="#">Nhẫn</a><a href="#">Bông Tai</a><a href="#">Lắc</a
                ><a href="#">Vòng</a><a href="#">Dây Chuyền</a>
              </div>
              <div class="material-menu">
                <span>Chất Liệu</span>
                <a href="#">Vàng</a>
                <a href="#">Bạc</a>
              </div>
              <div class="product-line">
                <span>Dòng Hàng</span>
                <a href="#">Trang Sức Đính Kim Cương</a
                ><a href="#">Trang Sức Không Đính Đá</a
                ><a href="#">Kim Cương Viên</a>
              </div>
              <div class="style-menu">
                <span>Trang Sức Phong Thuỷ</span>
                <a href="#">Trang Sức Theo Cung & Mệnh</a
                ><a href="#">Best Seller</a><a href="#">Hàng Đặt Trước</a>
              </div>
              <img
                src="https://cdn.pnj.io/images/2024/11/vuondasac-t12-400x270CTA.png"
                alt=""
                style="width: 300px; height: auto"
              />
            </div>
          </li>
          <li>
            <a href="{% url 'wedding_page' %}" class="menu-item" id="item-2">Trang Sức Cưới</a>
            <!-- Sub Menu 2-->
            <div class="sub-menu-2">
              <div class="purpose-menu">
                <span>Theo Mục Đích</span>
                <a href="#">Cầu Hôn</a><a href="#">Kết Hôn</a
                ><a href="#">Kỷ Niệm</a>
              </div>
              <div class="type-menu">
                <span>Chủng Loại</span>
                <a href="#">Nhẫn</a><a href="#">Bông Tai</a><a href="#">Lắc</a
                ><a href="#">Vòng Tay</a><a href="#">Dây Chuyền</a>
              </div>
              <div class="product-line">
                <span>Dòng Trang Sức</span>
                <a href="#">Kim Cương</a><a href="#">Không Đính Đá</a
                ><a href="#">Đá Màu</a>
              </div>
              <div class="material-menu">
                <span>Chất Liệu</span>
                <a href="#">Vàng 24k</a>
                <a href="#">Vàng 18k</a>
              </div>
              <img
                src="https://cdn.pnj.io/images/2024/10/trau-cau-08-10-24-Banner_BST_TC_KC_400x270.png"
                alt=""
                style="width: 300px; height: auto"
              />
            </div>
          </li>
          <li>
            <a href="{% url 'watch_page' %}" class="menu-item" id="item-3">Đồng Hồ</a>
            <!-- Sub Menu 3-->
            <div class="sub-menu-3">
              <div class="branch-menu">
                <span>Thương Hiệu Nhật Bản</span>
                <a href="#">Casio</a><a href="#">Orient</a
                ><a href="#">Citizen</a>
              </div>
              <div class="type-menu">
                <span>Chủng Loại</span>
                <a href="#">Hàng Đặt Trước</a><a href="#">Đồng Hồ</a
                ><a href="#">Đồng Hồ Cặp</a>
              </div>
              <div class="gener-menu">
                <span>Giới Tính</span>
                <a href="#">Nam</a>
                <a href="#">Nữ</a>
              </div>
              <img
                src="https://cdn.pnj.io/images/promo/216/PNJ-Watch-post-1-3.png"
                alt=""
                style="width: 300px; height: auto"
              />
            </div>
          </li>
          <li>
            <a href="{% url 'gift_page' %}" class="menu-item" id="item-4">Quà Tặng</a>
            <!-- Sub Menu 4-->
            <div class="sub-menu-4">
              <div class="gift-menu">
                <span>Gợi Ý Quà Tặng</span>
                <a href="#">Cho Người Lớn</a><a href="#">Cho Trẻ Em</a>
              </div>
              <div class="type-menu">
                <span>Quà Tặng Mỹ Nghệ</span>
                <a href="#">Tượng Phong Thuỷ</a><a href="#">Tranh Phong Thuỷ</a>
              </div>
              <img
                src="https://cdn.pnj.io/images/2024/09/DW_Navigation_Bar_CTA_400x270.png"
                alt=""
                style="width: 300px; height: auto"
              />
            </div>
          </li>
          <li>
            <a href="#" class="menu-item" id="item-5">Thương Hiệu</a>
            <div class="sub-menu-5">
              <div class="branch-menu">
                <div class="box">
                  <img
                    src="https://cdn.pnj.io/images/image-update/layout/iconhotdeal-new.svg"
                    alt=""
                    class="icon-search"
                    style="width: 15px; height: auto"
                  />
                  <span>Thương Hiệu</span>
                </div>
                <div class="image">
                  <a href="#"
                    ><img
                      src="https://cdn.pnj.io/images/2023/relayout-pdp/mencode-thuonghieu-logo.svg"
                      alt=""
                      style="width: 100px; height: 50px" /></a
                  ><a href="#"
                    ><img
                      src="https://cdn.pnj.io/images/2023/brand-search-bar/watch.svg"
                      alt=""
                      style="width: 100px; height: 50px" /></a
                  ><a href="#"
                    ><img
                      src="https://cdn.pnj.io/images/2023/brand-search-bar/style.svg"
                      alt=""
                      style="width: 100px; height: 50px" /></a
                  ><a href="#"
                    ><img
                      src="https://cdn.pnj.io/images/2023/brand-search-bar/disney.svg"
                      alt=""
                      style="width: 100px; height: 50px"
                  /></a>
                </div>
              </div>
            </div>
          </li>
          <li>
            <a href="{% url 'blog_page' %}" class="menu-item">Blog</a>
          </li>
          <li>
            <a href="{% url 'sales_page' %}" class="menu-item">Khuyến Mãi</a>
          </li>
          <input type="search" id="search-menu" placeholder="Tìm Kiếm Nhanh" />
        </ul>
      </nav>
    </header>
    <!-- Search -->
    <div class="search">
      <div class="wrap-search">
        <div class="search-container">
          <div class="search-bar">
            <button id="search-btn">
              <i class="fa-solid fa-magnifying-glass"></i>
            </button>
            <input type="text" id="search-input" placeholder="Tìm kiếm..." />
            <span id="search-btn-cancel">x</span>
          </div>
          <div class="search-main">
            <div class="content-sale">
              <div class="box">
                <img
                  src="https://cdn.pnj.io/images/image-update/layout/iconhotdeal-new.svg"
                  alt=""
                  class="icon-search"
                  style="width: 15px; height: auto"
                />
                <h4>Ưu đãi online</h4>
              </div>
              <div class="tags">
                <a href="{% url 'sales_page' %}" class="tag">Trang sức vàng ưu đãi 25%</a>
                <a href="{% url 'sales_page' %}" class="tag">Trang sức vàng ưu đãi 40%</a>
              </div>
            </div>
            <div class="rank-search">
              <div class="box">
                <img
                  src="https://cdn.pnj.io/images/image-update/layout/mobile/mui_ten.svg"
                  alt=""
                  class="icon-search"
                  style="width: 15px; height: auto"
                />
                <span>Top tìm kiếm</span>
              </div>
              <a href="{% url 'sales_page' %}" class="tag">Hàng Mới </a
              ><a href="#" class="tag">Nhẫn Cưới </a
              ><a href="#" class="tag">Vòng Cổ</a>
            </div>
            <div class="service-hot">
              <div class="box">
                <img
                  src="https://cdn.pnj.io/images/image-update/layout/mobile/hot.svg"
                  alt=""
                  class="icon-search"
                  style="width: 15px; height: auto"
                />
                <span>Dịch vụ hot</span>
              </div>
              <a class="tag" href="{% url 'gift_page' %}" class="gift">Phiếu quà tặng</a>
            </div>
            <div class="branch-search">
              <div class="box">
                <img
                  src="https://cdn.pnj.io/images/image-update/searchbar/brand_icon.svg"
                  alt=""
                  class="icon-search"
                  style="width: 15px; height: auto"
                />
                <span>Thương hiệu nổi bật</span>
              </div>
              <a href="#"
                ><img
                  src="https://cdn.pnj.io/images/image-update/searchbar/style.svg"
                  alt=""
                  class="image-branch" /></a
              ><a href="#"
                ><img
                  src="https://cdn.pnj.io/images/image-update/searchbar/disney.svg"
                  alt=""
                  class="image-branch"
              /></a>
            </div>
            <div class="product-top">
              <div class="box">
                <img
                  src="https://cdn.pnj.io/images/image-update/layout/mobile/tim_kiem.svg"
                  alt=""
                  class="icon-search"
                  style="width: 15px; height: auto"
                />
                <span>Sản phẩm được tìm kiếm nhiều nhất</span>
              </div>
              <div class="wrap">
                <div class="detail">
                  <img
                    src="https://www.pnj.com.vn/search/_next/image?url=https%3A%2F%2Fcdn.pnj.io%2Fimages%2Fdetailed%2F222%2Fsp-gb0000y003038-bong-tai-vang-24k-pnj-1.png&w=64&q=75"
                    alt=""
                    style="width: 60px; height: auto"
                  />
                  <span class="price">9.999.999đ</span>
                </div>
                <div class="detail">
                  <img
                    src="https://www.pnj.com.vn/search/_next/image?url=https%3A%2F%2Fcdn.pnj.io%2Fimages%2Fdetailed%2F222%2Fsp-gb0000y003038-bong-tai-vang-24k-pnj-1.png&w=64&q=75"
                    alt=""
                    style="width: 60px; height: auto"
                  />
                  <span class="price">9.999.999đ</span>
                </div>
                <div class="detail">
                  <img
                    src="https://www.pnj.com.vn/search/_next/image?url=https%3A%2F%2Fcdn.pnj.io%2Fimages%2Fdetailed%2F222%2Fsp-gb0000y003038-bong-tai-vang-24k-pnj-1.png&w=64&q=75"
                    alt=""
                    style="width: 60px; height: auto"
                  />
                  <span class="price">9.999.999đ</span>
                </div>
                <div class="detail">
                  <img
                    src="https://www.pnj.com.vn/search/_next/image?url=https%3A%2F%2Fcdn.pnj.io%2Fimages%2Fdetailed%2F222%2Fsp-gb0000y003038-bong-tai-vang-24k-pnj-1.png&w=64&q=75"
                    alt=""
                    style="width: 60px; height: auto"
                  />
                  <span class="price">9.999.999đ</span>
                </div>
                <div class="detail">
                  <img
                    src="https://www.pnj.com.vn/search/_next/image?url=https%3A%2F%2Fcdn.pnj.io%2Fimages%2Fdetailed%2F222%2Fsp-gb0000y003038-bong-tai-vang-24k-pnj-1.png&w=64&q=75"
                    alt=""
                    style="width: 60px; height: auto"
                  />
                  <span class="price">9.999.999đ</span>
                </div>
                <div class="detail">
                  <img
                    src="https://www.pnj.com.vn/search/_next/image?url=https%3A%2F%2Fcdn.pnj.io%2Fimages%2Fdetailed%2F222%2Fsp-gb0000y003038-bong-tai-vang-24k-pnj-1.png&w=64&q=75"
                    alt=""
                    style="width: 60px; height: auto"
                  />
                  <span class="price">9.999.999đ</span>
                </div>
                <div class="detail">
                  <img
                    src="https://www.pnj.com.vn/search/_next/image?url=https%3A%2F%2Fcdn.pnj.io%2Fimages%2Fdetailed%2F222%2Fsp-gb0000y003038-bong-tai-vang-24k-pnj-1.png&w=64&q=75"
                    alt=""
                    style="width: 60px; height: auto"
                  />
                  <span class="price">9.999.999đ</span>
                </div>
                <div class="detail">
                  <img
                    src="https://www.pnj.com.vn/search/_next/image?url=https%3A%2F%2Fcdn.pnj.io%2Fimages%2Fdetailed%2F222%2Fsp-gb0000y003038-bong-tai-vang-24k-pnj-1.png&w=64&q=75"
                    alt=""
                    style="width: 60px; height: auto"
                  />
                  <span class="price">9.999.999đ</span>
                </div>
              </div>
            </div>
          </div>
          <div class="search-sub">
            <div class="content-search">
              <img
                style="width: 80px; height: auto"
                src="https://cdn.pnj.io/images/thumbnails/485/485/detailed/204/sp-gmdd00w000634-mat-day-chuyen-kim-cuong-vang-trang-14k-pnj-chu-a-1.png"
                alt=""
              />
              <div class="title-product">
                <span class="name-product">Vòng Vàng 18k </span>
                <div class="detail-product">
                  <span class="price">9.999.999đ</span>
                  <span class="stock">991 đã bán</span>
                </div>
              </div>
            </div>
            <div class="content-search">
              <img
                style="width: 80px; height: auto"
                src="https://cdn.pnj.io/images/thumbnails/485/485/detailed/204/sp-gmdd00w000634-mat-day-chuyen-kim-cuong-vang-trang-14k-pnj-chu-a-1.png"
                alt=""
              />
              <div class="title-product">
                <span class="name-product">Vòng Vàng 18k </span>
                <div class="detail-product">
                  <span class="price">9.999.999đ</span>
                  <span class="stock">992 đã bán</span>
                </div>
              </div>
            </div>
            <div class="content-search">
              <img
                style="width: 80px; height: auto"
                src="https://cdn.pnj.io/images/thumbnails/485/485/detailed/204/sp-gmdd00w000634-mat-day-chuyen-kim-cuong-vang-trang-14k-pnj-chu-a-1.png"
                alt=""
              />
              <div class="title-product">
                <span class="name-product">Vòng Vàng 18k </span>
                <div class="detail-product">
                  <span class="price">9.999.999đ</span>
                  <span class="stock">993 đã bán</span>
                </div>
              </div>
            </div>
            <div class="content-search">
              <img
                style="width: 80px; height: auto"
                src="https://cdn.pnj.io/images/thumbnails/485/485/detailed/204/sp-gmdd00w000634-mat-day-chuyen-kim-cuong-vang-trang-14k-pnj-chu-a-1.png"
                alt=""
              />
              <div class="title-product">
                <span class="name-product">Vòng Vàng 18k </span>
                <div class="detail-product">
                  <span class="price">9.999.999đ</span>
                  <span class="stock">994 đã bán</span>
                </div>
              </div>
            </div>
            <div class="content-search">
              <img
                style="width: 80px; height: auto"
                src="https://cdn.pnj.io/images/thumbnails/485/485/detailed/204/sp-gmdd00w000634-mat-day-chuyen-kim-cuong-vang-trang-14k-pnj-chu-a-1.png"
                alt=""
              />
              <div class="title-product">
                <span class="name-product">Vòng Vàng 18k </span>
                <div class="detail-product">
                  <span class="price">9.999.999đ</span>
                  <span class="stock">995 đã bán</span>
                </div>
              </div>
            </div>
            <div class="content-search">
              <img
                style="width: 80px; height: auto"
                src="https://cdn.pnj.io/images/thumbnails/485/485/detailed/204/sp-gmdd00w000634-mat-day-chuyen-kim-cuong-vang-trang-14k-pnj-chu-a-1.png"
                alt=""
              />
              <div class="title-product">
                <span class="name-product">Vòng Vàng 18k </span>
                <div class="detail-product">
                  <span class="price">9.999.999đ</span>
                  <span class="stock">996 đã bán</span>
                </div>
              </div>
            </div>
            <div class="content-search">
              <img
                style="width: 80px; height: auto"
                src="https://cdn.pnj.io/images/thumbnails/485/485/detailed/204/sp-gmdd00w000634-mat-day-chuyen-kim-cuong-vang-trang-14k-pnj-chu-a-1.png"
                alt=""
              />
              <div class="title-product">
                <span class="name-product">Vòng Vàng 18k </span>
                <div class="detail-product">
                  <span class="price">9.999.999đ</span>
                  <span class="stock">997 đã bán</span>
                </div>
              </div>
            </div>
            <div class="content-search">
              <img
                style="width: 80px; height: auto"
                src="https://cdn.pnj.io/images/thumbnails/485/485/detailed/204/sp-gmdd00w000634-mat-day-chuyen-kim-cuong-vang-trang-14k-pnj-chu-a-1.png"
                alt=""
              />
              <div class="title-product">
                <span class="name-product">Vòng Vàng 18k </span>
                <div class="detail-product">
                  <span class="price">9.999.999đ</span>
                  <span class="stock">998 đã bán</span>
                </div>
              </div>
            </div>
            <div class="content-search">
              <img
                style="width: 80px; height: auto"
                src="https://cdn.pnj.io/images/thumbnails/485/485/detailed/204/sp-gmdd00w000634-mat-day-chuyen-kim-cuong-vang-trang-14k-pnj-chu-a-1.png"
                alt=""
              />
              <div class="title-product">
                <span class="name-product">Vòng Vàng 18k </span>
                <div class="detail-product">
                  <span class="price">9.999.999đ</span>
                  <span class="stock">999 đã bán</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- End Search -->
    <!-- End Header -->
    <!-- Main -->
  <!-- Breadcrumb -->
  <div class="breadcrumb">
    <a href="#">Trang chủ</a>/
    <span>Thông báo của tôi</span>
  </div>
  <!-- Layout chính -->
  <div class="container-sidebar">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="profile">
        <img
          src="https://hoanghamobile.com/tin-tuc/wp-content/uploads/2024/07/anh-avatar-anime-5.jpg"
          alt="Avatar"
          class="avatar"
        />
        <h3>Tài khoản của<br /><span>{{ request.session.user_name }}</span></h3>
      </div>
      <ul class="menu-sidebar">
        <li>
          <a href="{% url 'customer_page' %}" >Thông tin tài khoản</a>
        </li>
        <li><a href="{% url 'notification_list' %}" class="active">Thông báo của tôi</a></li>
        <li><a href="{% url 'manageorder_page' %}">Quản lý đơn hàng</a></li>
        <li><a href="{% url 'address_page' %}">Sổ địa chỉ</a></li>
        <li><a href="{% url 'review_page' %}">Đánh giá sản phẩm</a></li>
        <li><a href="{% url 'productview_page' %}">Sản phẩm bạn đã xem</a></li>
        <li><a href="{% url 'wishlist_page' %}">Sản phẩm yêu thích</a></li>
        <li><a href="{% url 'comments_page' %}">Nhận xét của tôi</a></li>
        {% if request.session.user_role == 6  %}
          <li>
              <a href="{% url 'quanly:admin_dashboard' %}" class="admin-btn">
                  <i class="fa-solid fa-user-shield"></i> Trang QT | Admin
              </a>
          </li>
          {% endif %}
          {% if request.session.user_role == 5  %}
          <li>
              <a href="{% url 'quanly:manager_dashboard' %}" class="admin-btn">
                  <i class="fa-solid fa-user-shield"></i> Trang QT | Manager
              </a>
          </li>
          {% endif %}
          {% if request.session.user_role == 4  %}
          <li>
              <a href="{% url 'quanly:delivery_staff_dashboard' %}" class="admin-btn">
                  <i class="fa-solid fa-user-shield"></i> Trang QT | Delivery 
              </a>
          </li>
          {% endif %}
          <form action="{% url 'logout' %}" method="post">
            {% csrf_token %}
            <button type="submit" class="btn-out">Đăng xuất</button>
          </form>
      </ul>
    </aside>
    <!-- Nội dung chính -->
  <main class="content-profile">
      <h4>Thông báo của tôi</h4>
      <div id="notification"></div>
      <div class="table-notifi">
          <table>
              <thead>
                  <tr>
                      <th>Mã ĐH</th>
                      <th>Trạng Thái</th>
                      <th>Ngày Đặt Hàng</th>
                      <th>Tổng Tiền</th>
                      <th>Ảnh Sản Phẩm</th>
                      <th>Thao Tác</th>
                  </tr>
              </thead>
              <tbody>
                <tr><td colspan="6">Đang tải dữ liệu...</td></tr>
              </tbody>
          </table>
      </div>
  </main>
  </div>

<!-- End Main -->
    <!-- End Main -->
   <!-- Footer -->

   <footer class="footer">
    <hr />
    <div class="container">
      <!-- Logo -->
      <img
        src="{%static 'home/assets/img/img-main/logo-page.jpg' %}"
        alt=""
        class="logo-footer"
      />
      <div class="wrap-content">
        <!-- Content Cty -->
        <div class="content-footer">
          <h4>©2017 Công Ty Cổ Phần Vàng Bạc Đá Quý</h4>
          <p>
            02 Võ Oanh, P.25, Q.Bình Thạnh, TP.Hồ Chí Minh <br />
            ĐT: <span>028 9988 xxxx</span> - Fax: <span>028 3900 xxxx</span>
          </p>
          <p>
            <span>Giấy chứng nhận đăng ký doanh nghiệp: 99999999</span> do Sở
            Kế hoạch & Đầu tư TP.HCM cấp lần đầu ngày 02/01/2004. Ngành, nghề
            kinh doanh
          </p>
          <p>
            Tổng đài hỗ trợ (08:00-21:00, miễn phí gọi) <br />Gọi mua:
            <span>1800545xxx </span> (phím 1) <br />Khiếu nại:
            <span>1800545xxx</span> (phím 2)
          </p>
        </div>
        <!-- Intro -->
        <div class="intro-footer">
          <span>VỀ D & C</span>
          <a href="#">Tuyển Dụng</a>
          <a href="{% url 'inspection_page' %}">Kiểm định kim cương</a>
          <a href="{% url 'gift_page' %}">Quà tặng</a>
        </div>
        <!-- Dịch vụ, chính sách -->
        <div class="use-footer">
          <span>DỊCH VỤ KHÁCH HÀNG</span>
          <a href="{% url 'size_page' %}">Hướng dẫn đo size trang sức</a>
          <a href="{% url 'buybill_page' %}">Hướng dân mua và thanh toán</a>
          <a href="{% url 'guide_page' %}">Cẩm nang sử dụng trang sức</a>
          <a href="{% url 'faq_page' %}">Câu hỏi thường gặp</a>
          <span>TỔNG HỢP CÁC CHÍNH SÁCH D&C</span>
          <a href="{% url 'delivery_page' %}">Chính sách giao hàng</a>
          <a href="{% url 'warranty_page' %}">Chính sách bảo hành</a>
          <a href="{% url 'security_page' %}">Chính sách bảo mật thông tin</a>
        </div>
        <!-- Link social -->
        <div class="social-footer">
          <span>KẾT NỐI VỚI CHÚNG TÔI</span>
          <div class="logo-social">
            <a href="#"
              ><img
                src="https://cdn.pnj.io/images/image-update/footer/facebook.svg"
                alt=""
            /></a>
            <a href="#"
              ><img
                src="https://cdn.pnj.io/images/image-update/footer/instagram.svg"
                alt=""
            /></a>
            <a href="#"
              ><img
                src="https://cdn.pnj.io/images/image-update/footer/youtube.svg"
                alt=""
            /></a>
            <a href="#"
              ><img
                src="https://cdn.pnj.io/images/image-update/footer/email.svg"
                alt=""
            /></a>
          </div>
        </div>
        <!-- Khác -->
        <div class="methor-pay">
          <span>PHƯƠNG THỨC THANH TOÁN</span>
          <div class="image-pay">
            <img
              src="https://www.pnj.com.vn/design/themes/pnjrovski/media/images/payments/visa.svg"
              alt=""
            />
            <img
              src="https://www.pnj.com.vn/design/themes/pnjrovski/media/images/payments/mastercard.svg"
              alt=""
            />
            <img
              src="https://www.pnj.com.vn/design/themes/pnjrovski/media/images/payments/jcb.svg"
              alt=""
            />
            <img
              src="https://www.pnj.com.vn/design/themes/pnjrovski/media/images/payments/thanhtoantienmat.svg"
              alt=""
            />
          </div>
        </div>
        <div class="certi">
          <span>CHỨNG NHẬN</span>
          <img
            src="https://cdn.pnj.io/images/image-update/op-da-thong-bao-bo-cong-thuong-183x60.png"
            alt=""
            class="certis"
          />
        </div>
      </div>
    </div>
  </footer>
  <script>
    function formatDate(dateString) {
    const date = new Date(dateString);
    const day = date.getDate().toString().padStart(2, '0');
    const month = (date.getMonth() + 1).toString().padStart(2, '0');
    const year = date.getFullYear();
    return `${day}/${month}/${year}`;
}
   async function fetchOrders() {
    try {
        let response = await fetch("/api/orders/");
        let data = await response.json();
        
        let tableBody = document.querySelector(".table-notifi tbody");
        tableBody.innerHTML = "";

        if (!data.orders || data.orders.length === 0) {
            tableBody.innerHTML = "<tr><td colspan='6'>Không có thông báo nào.</td></tr>";
            return;
        }

        data.orders.forEach(order => {
            const orderImage = order.order_details && order.order_details[0] ? 
                order.order_details[0].product_image : 
                'https://via.placeholder.com/50';

            const orderId = order.OrderID || order.order_id || 'N/A';
            // Sử dụng hàm formatDate cho ngày tháng
            const formattedDate = formatDate(order.created_at);

            let row = document.createElement("tr");
            row.id = `row-${orderId}`;
            row.className = order.is_read ? "read" : "";

            row.innerHTML = `
                <td>${orderId}</td>
                <td>${order.status || 'Không xác định'}</td>
                <td>${formattedDate}</td>
                <td>${order.total_amount || '0 VNĐ'} VNĐ</td>
                <td>
                    <img src="${orderImage}" 
                         alt="Sản phẩm" 
                         style="width: 50px; height: 50px;" 
                         onerror="this.src='https://via.placeholder.com/50'">
                </td>
                <td>
                    <button class="button mark-read" data-id="${orderId}" 
                        ${order.is_read ? "disabled style='background-color: #6c757d;'" : ""}>
                        ${order.is_read ? "Đã Đọc" : "Đã Đọc Tin"}
                    </button>
                    <button class="button delete" data-id="${orderId}">Xóa</button>
                </td>
            `;

            tableBody.appendChild(row);
        });

        addButtonEvents();

    } catch (error) {
        console.error("Lỗi khi tải dữ liệu:", error);
        let tableBody = document.querySelector(".table-notifi tbody");
        tableBody.innerHTML = "<tr><td colspan='6'>Đã xảy ra lỗi khi tải dữ liệu.</td></tr>";
    }
}

function addButtonEvents() {
    // Xử lý nút "Đánh dấu đã đọc"
    document.querySelectorAll(".mark-read").forEach(button => {
        button.addEventListener("click", async () => {
            try {
                const orderId = button.dataset.id;
                const response = await fetch(`/api/orders/read/${orderId}/`, {
                    method: "POST",
                    headers: {
                        "X-CSRFToken": getCSRFToken(),
                        "Content-Type": "application/json"
                    }
                });

                if (response.ok) {
                    button.disabled = true;
                    button.style.backgroundColor = "#6c757d";
                    button.textContent = "Đã Đọc";
                    document.getElementById(`row-${orderId}`).classList.add("read");
                    showNotification("Đã đánh dấu là đã đọc", "#28a745");
                }
            } catch (error) {
                console.error("Lỗi khi đánh dấu đã đọc:", error);
                showNotification("Có lỗi xảy ra", "#dc3545");
            }
        });
    });

    // Xử lý nút "Xóa"
    document.querySelectorAll(".delete").forEach(button => {
        button.addEventListener("click", async () => {
            try {
                const orderId = button.dataset.id;
                if (!confirm("Bạn có chắc chắn muốn xóa thông báo này?")) return;

                const response = await fetch(`/api/orders/delete/${orderId}/`, {
                    method: "DELETE",
                    headers: {
                        "X-CSRFToken": getCSRFToken()
                    }
                });

                if (response.ok) {
                    document.getElementById(`row-${orderId}`).remove();
                    showNotification("Đã xóa thông báo", "#28a745");
                }
            } catch (error) {
                console.error("Lỗi khi xóa:", error);
                showNotification("Có lỗi xảy ra", "#dc3545");
            }
        });
    });
}

function showNotification(message, backgroundColor = "#28a745") {
    const notification = document.getElementById("notification");
    notification.textContent = message;
    notification.style.backgroundColor = backgroundColor;
    notification.style.display = "block";
    setTimeout(() => {
        notification.style.display = "none";
    }, 3000);
}

function getCSRFToken() {
    const cookies = document.cookie.split(';');
    for (let cookie of cookies) {
        const [name, value] = cookie.trim().split('=');
        if (name === 'csrftoken') return value;
    }
    return '';
}

// Khởi tạo khi trang tải xong
document.addEventListener("DOMContentLoaded", () => {
    fetchOrders();
    // Cập nhật mỗi 30 giây
    setInterval(fetchOrders, 30000);
});
    </script>
    <script src="{% static 'home/assets/js/profile.js' %}"></script>
    <script src="{% static 'home/assets/js/search.js' %}"></script>
    <!-- <script>
      // Thông báo
      document.addEventListener("DOMContentLoaded", function () {
        const deleteButtons = document.querySelectorAll(".button.delete");
        const markReadButtons = document.querySelectorAll(
          ".button:not(.delete)"
        );
        const notification = document.getElementById("notification");

        function showNotification(message, color = "#28a745") {
          notification.textContent = message;
          notification.style.backgroundColor = color;
          notification.style.display = "block";
          setTimeout(() => {
            notification.style.display = "none";
          }, 3000);
        }

        deleteButtons.forEach((button) => {
          button.addEventListener("click", function () {
            const row = button.closest("tr");
            row.remove();
            showNotification("Đơn hàng đã được xóa.", "#dc3545");
          });
        });

        markReadButtons.forEach((button) => {
          button.addEventListener("click", function () {
            const row = button.closest("tr");
            row.classList.add("active");
            button.textContent = "Đã Đọc";
            button.style.backgroundColor = "#6c757d";
            button.style.pointerEvents = "none";
            showNotification("Đơn hàng đã được đánh dấu là đã đọc.");
          });
        });
      });
    </script> -->
  </body>
</html>